<!--
  Generated template for the CartPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Validation</ion-title>
  </ion-navbar>
</ion-header>

<ion-content >
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Tirer pour rafraîchir"
      refreshingSpinner="dots"
      refreshingText="Chargement...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-grid>
    <div>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label>Selectionner votre region</ion-label>
            <ion-select [(ngModel)]="region" (ionChange)="choixRegion()" okText="Valider" cancelText="Annuler">
              <ion-option *ngFor="let item of STOCKIST_LIST" value="{{item.region}}">{{item.region}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-list>
        <div class="divider"></div>
        <div *ngIf="region!=''">
          <p>Payez <strong style="color: #009d8b">{{price |priceFormat}}</strong> au lieu de {{1.25*price |priceFormat}} (soit 25% de remise) en utilisant le code
            <strong style="color: #009d8b">{{code}}</strong> chez un de nos représentant ci-dessous.</p>

          <div class="divider"></div>
          <h5>Nos représentants</h5>
          <ion-searchbar [(ngModel)]="location" placeholder="Quartier ou ville" (ionInput)="getItems($event)"></ion-searchbar>
          <ion-item *ngFor="let item of stockist">
            <h2><strong style="color: #009d8b">{{item.name}}</strong></h2>

            <p>{{item.location}}</p>
            <p>
              Contact(s) :
              <span style="float: right">{{item.phone1|priceFormat}}</span>
              <br>
              <span style="float: right">{{item.phone2|priceFormat}}</span>
            </p>
          </ion-item>
        </div>
      </ion-card-content>
    </div>

  </ion-grid>
</ion-content>

<ion-footer text-right="">
  <button ion-button clear class="price">Besoin d'assistance?</button>
  <a ion-button class="busy" href="https://api.whatsapp.com/send?phone=237696870700&text={{text}}">Nous contacter</a>
</ion-footer>
